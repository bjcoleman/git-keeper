#!/usr/bin/expect

# This is called from the connect script, and is not intended to be called directly.

<<<<<<< HEAD
if {[llength $argv] != 4} {
    send_user "Usage: connect <hostname> <port> <username> <password>\n"
=======
if {[llength $argv] != 2} {
    send_user "Usage: connect <hostname> <port>\n"
>>>>>>> fc4d22c04e99b444fa54c6c945067d8b314c8a52
    exit 1
}

set host [lindex $argv 0]
set port [lindex $argv 1]
<<<<<<< HEAD
set user [lindex $argv 2]
set pass [lindex $argv 3]
=======
>>>>>>> fc4d22c04e99b444fa54c6c945067d8b314c8a52

# The port changes each time you connect, which can cause your known_hosts file to
# grow rapidly if you re-run/re-connect frequently.  To avoid this we turn off
# checking (so it doesn't prompt you about a new host) and send the known_host
# write to /dev/null.
<<<<<<< HEAD
spawn ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $user@$host -p $port
expect "assword"
send "$pass\r"
=======
spawn ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null keeper@$host -p $port
expect "password"
send "g1tk33p3r\r"
>>>>>>> fc4d22c04e99b444fa54c6c945067d8b314c8a52
interact
